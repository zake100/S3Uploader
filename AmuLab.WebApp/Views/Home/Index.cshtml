@using System.Configuration
@{
    ViewBag.Title = "Upload To S3";
    var apiUrl = ConfigurationManager.AppSettings[AmuLab.Core.Constants.Configuration.ApiUrl];
}
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Upload to S3
        <small></small>
    </h1>
    @*<ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Dashboard</li>
        </ol>*@
</section>

<!-- Main content -->
<section class="content">
    <!-- Small boxes (Stat box) -->
    <!-- /.row -->
    <text>@apiUrl</text>
    @using (Ajax.BeginForm("", "", null, new AjaxOptions
    {
        HttpMethod = "POST",
        Url = $"{ConfigurationManager.AppSettings[AmuLab.Core.Constants.Configuration.ApiUrl]}/api/file/upload",
        OnSuccess = "onSubmitSuccess",
        OnFailure = "onSubmitFailure",
        OnBegin = "validateForm"
    }, new { @class = "form-horizontal" }))
    {
        <div class="form-group">
            <input type="file" name="file" class="form-control" />
        </div>

        <button class="btn btn-success">Upload</button>
    }
</section>
@section scripts {
    <script src="~/Content/js/jquery.unobtrusive-ajax.js"></script>
    <script type="text/javascript">
        function validateForm(data) {
            console.log('validate', data);
        }

        function onSubmitSuccess(data) {
            alert('success');
        }

        function onSubmitFailure(data) {
            alert('failure');
        }
    </script>
}